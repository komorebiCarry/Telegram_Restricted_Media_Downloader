services:
  telegram-downloader:
    build: .
    container_name: telegram-restricted-media-downloader
    restart: unless-stopped
    stdin_open: true  # 保持 stdin 开放，支持交互
    tty: true         # 分配伪终端，支持交互式输入
    volumes:
      # 挂载配置目录（容器内: /app/TRMD, 由 XDG_CONFIG_HOME=/app 和软件名 TRMD 组成）
      - ./config:/app/TRMD
      # 挂载 session 目录（用于存放 Telegram 登录会话文件）
      # 如果已有 session 文件，直接放到 ./sessions/ 目录即可
      - ./sessions:/app/sessions
      # 挂载下载目录（根据你的配置文件中的 save_directory 设置）
      # 方式1: 使用当前目录下的 downloads 文件夹（默认）
      - ./downloads:/app/downloads
      # 方式2: 挂载外部目录（NAS 共享目录或其他外部存储）
      # 示例：挂载 NAS 的共享目录
      # - /volume1/Media/Telegram:/app/downloads
      # 示例：挂载其他外部存储
      # - /mnt/external_drive/telegram:/app/downloads
      # 挂载临时缓存目录
      - ./temp:/app/temp
      # 如果需要挂载链接文件，取消下面的注释
      # - ./links.txt:/app/links.txt
    environment:
      # 设置时区
      - TZ=Asia/Shanghai
    # 如果需要网络代理，取消下面的注释并配置
    # network_mode: "bridge"
    # extra_hosts:
    #   - "host.docker.internal:host-gateway"
